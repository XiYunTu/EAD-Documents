### 概述

Rainbow 是基于 HTML5、CSS3 和 JavaScript 对 EAD 服务引擎提供的 Rest Service API 进行解析和渲染，动态生成 Web 用户交互界面的前端应用程序框架。本文对 Rainbow 前端框架进行详细说明，包含了开发 Rainbow 所使用的关键技术介绍，Rainbow 关键术语定义。分别从架构概述、核心框架选型、模块及程序运行流程、视图、组件、界面主题、国际化语言支持、扩展开发、生成工具等方面综合进行概要说明。本文旨在描述 Rainbow 的设计开发思想和运行原理及相关生态依赖，如果要涉及实质的扩展开发请参考《扩展开发指南》。

### 关键技术

#### HTML 5

HTML5 是 HTML 最新的修订版本，2014年10月由万维网联盟（W3C）完成标准制定。目标是取代1999年所制定的 HTML 4.01 和 XHTML 1.0 标准，以期能在互联网应用迅速发展的时候，使网络标准达到符合当代的网络需求。广义论及 HTML5 时，实际指的是包括 HTML、CSS 和 JavaScript 在内的一套技术组合。它希望能够减少网页浏览器对于需要插件的丰富性网络应用服务（Plug-in-Based Rich Internet Application，RIA），例如：AdobeFlash、Microsoft Silverlight 与 Oracle JavaFX 的需求，并且提供更多能有效加强网络应用的标准集。

#### CSS 3

CSS 即层叠样式表（Cascading StyleSheet）。 在网页制作时采用层叠样式表技术，可以有效地对页面的布局、字体、颜色、背景和其它效果实现更加精确的控制。 只要对相应的代码做一些简单的修改，就可以改变同一页面的不同部分，或者页数不同的网页的外观和格式。CSS3 是 CSS 技术的升级版本，CSS3 语言开发是朝着模块化发展的。以前的规范作为一个模块实在是太庞大而且比较复杂，所以，把它分解为一些小的模块，更多新的模块也被加入进来。这些模块包括： 盒子模型、列表模块、超链接方式 、语言模块 、背景和边框 、文字特效 、多栏布局等。

#### JavaScript

JavaScript 一种直译式脚本语言，是一种动态类型、弱类型、基于原型的语言，内置支持类型。它的解释器被称为 JavaScript 引擎，为浏览器的一部分，广泛用于客户端的脚本语言，最早是在 HTML（标准通用标记语言下的一个应用）网页上使用，用来给 HTML 网页增加动态功能。

#### JSON
JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式。它基于 ECMAScript 的一个子集。 JSON 采用完全独立于语言的文本格式，但是也使用了类似于C语言家族的习惯（包括C、C++、C#、Java、JavaScript、Perl、Python等）。这些特性使JSON成为理想的数据交换语言。 易于人阅读和编写，同时也易于机器解析和生成(一般用于提升网络传输速率)。

#### AMD
AMD 全称是 Asynchronous Module Definition，即异步模块加载机制。AMD 规范是 JavaScript 开发的一次重要尝试，它以简单而优雅的方式统一了 JavaScript 的模块定义和加载机制，并迅速得到很多框架的认可和采纳。这对开发人员来说是一个好消息，通过AMD我们降低了学习和使用各种框架的门槛，能够以一种统一的方式去定义和使用模块，提高开发效率，降低了应用维护成本。

#### Web Storage

Web Storage实际上由两部分组成：sessionStorage 与 localStorage。 sessionStorage 用于本地存储一个会话（session）中的数据，这些数据只有在同一个会话中的页面才能访问并且当会话结束后数据也随之销毁。因此 sessionStorage 不是一种持久化的本地存储，仅仅是会话级别的存储。 localStorage 用于持久化的本地存储，除非主动删除数据，否则数据是永远不会过期的。

#### MVVM

Rainbow 基于 API 模型动态渲染用户交互视图，通过动态渲染的数据表单对视图模型进行更新，利用 Backbone 实现服务端和客户端数据同步交互。View 绑定到 ViewModel，然后执行一些命令再向它请求一个动作。而反过来，ViewModel 跟 Model 通讯，告诉它更新来响应UI。这样便使得为应用构建UI非常的容易。同时，当 UI 和功能越来越松耦合的时候，功能的可测试性就越来越强。

### 术语定义

#### View

Rainbow 的核心业务模块抽象，分为视图模型（View Model）和视图（View），视图模型负责与服务端 API 进行数据同步，视图模型收到 API 返回的数据后根据视图类型定义选择相应类型的视图进行界面动态渲染。视图是一系列界面组件的容器组件，一般视图由动作栏、过滤器栏、数据列表、状态栏、分页栏、设置栏等功能组件组成。各功能组件彼此独立，根据对视图模型的事件监听来响应用户操作。

#### Action

Rainbow 的数据操作业务模块抽象，Action 作为视图的核心组件，根据视图模型的范式定义（Schema）动态渲染数据表单和进行数据校验，用户通过数据表单输入或变更数据时，自动同步更新视图模型实现数据绑定，最后通过 Restful 与服务端 API 交互完成数据操作。Action 是 Rainbow 中最复杂和业务多样式要求最多的模块，系统内置了创建（POST）、更新（PUT）、删除（DELETE）、单条数据处理（one）、多条数据处理（batch）、单文件上传（file）、多文件上传（upload）、下载（download）等常用动作组件，也允许通过扩展驱动的方式实现复杂数据操作动作的自定义。